# BoS-Web

This project is based on [board-of-symbols (BoS)](https://github.com/stephaneuler/board-of-symbols#board-of-symbols-bos) and was created as a part of a Bachelor-Thesis.

In comparison BoS is a Java application and BoS-Web is a SaaS of this project. It is based on technologies like:
- [Docker](https://www.docker.com)
- [Node.js](https://nodejs.org)
- [RethinkDB](https://www.rethinkdb.com)
- [Socket.io](https://socket.io)
- [Fabric.js](http://fabricjs.com)
- [CodeMirror](https://codemirror.net/)
- [Emscripten](http://kripken.github.io/emscripten-site/)
- [Transcrypt](http://transcrypt.org)
- [JSweet](http://www.jsweet.org)

The decision for the compiler/transpiler is based on the github [List of languages that compile to JS](https://github.com/jashkenas/coffeescript/wiki/list-of-languages-that-compile-to-js).

## How it works
BoS-Web tries to imitate the functionality of BoS. Because of that, it uses a similar UI. The Web-App consists of two components. The **Board** and the **Editor**.
The Board is Canvas, which is generated by Fabric.js. The Editor is made with CodeMirror, a *versatile text editor implemented in JavaScript for the browser.*
The connection to the Node.js-Server is done by Socket.io.

The server runs the compilers for the different programming languages. Actually supported with few compilers are C and C++ (Emscripten), Java (JSweet) and Python (Transcrypt).
As Database this project uses RethinkDB, a No-SQL-Database with JSON.

All components run in different Docker Containers. So they can be maintained independently from each other. They can be all started by one command with the docker-compose.yml.

## How to use it
At first you need to install Docker on your machine.

All Docker Images can be downloaded from https://hub.docker.com/u/ystenzel/ or build with the different *Dockerfiles* in the repository.
When the Containers are all running, the Web-App can be opened with a browser at ```localhost:3000```. The Database can be reached at the RethinkDB default port ```localhost:8080```.

To create the first test data with two users and four projects each simply click *create testdata* at the Login Modal, when you open the Web-App. The two users *janedoe* and *johndoe*, both with *password* as their secret, can be used.

Each project is a code-snippet, so if you choose C as compiler, all functions to modify the Board are already implemented in the header. The code written by the user is filled in the main-function once it gets compiled.

All available functions to modify the board can be found here: [List of available functions](https://github.com/ystenzel/bos-web/blob/master/List-of-available-functions.md)

Please notice, that the actual JSweet compiler for Java takes a bit of time. *(Starting with 5sec to compile the code)*

The bos-web.env holds global variables that are you used in the containers.

### Normal-Mode
If you just wanna give it a try you can use the simple mode.
Move to the directory where the docker-compose file is.

Then start everything. *Notice that RethinkDB will create a folder beside the docker-compose file to store its data permanent.*
We will do this in the detached mode.
```
cd /find/the/path/

docker-compose up -d
```

After a few seconds the containers will be running and you can open the Web-App in your Browser.

### Dev-Mode
If you want to modify the system on the fly, you need to run everything with the ```docker-compose-dev.yml```. This will also make things a bit more complicated.

To mount folders of your host-machine inside the containers they are linked like this:
```
volumes:
 - ./dockerfiles/emscripten/api:/usr/local/api-emscripten
```

In order to run the compiler inside the containers you need to install the node_modules. To do that open the api folders inside the directories and run ```npm install``` (for the bos-web-app even ```bower install```).

After that you can start the compose:
```
docker-compose -f docker-compose-dev.yml up -d
```

Notice that the services won't automatically, because the commands are overwritten in the compose file with ```command /bin/bash``` to get access to the bash when you attach them.

To connect to a container run:
```
docker name-of-container attach
```

Scripts inside the containers can be started, restarted and stopped with node or pm2.
